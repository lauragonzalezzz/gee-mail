<html>
	<head>
    <title>Geemail</title>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <script>
      window.onload = function(){
         
//Load the emails

      		function generateEmail(messages) {
      			for (var i = 0; i < messages.length; i++)  {
      				var sender = messages[i].sender;
      				var subject = messages[i].subject;
      				var date = messages[i].date;
      				var body = messages[i].body;
      			

      		var messageListElement = document.createElement('div');
      		messageListElement.className = 'messageList';
      		document.getElementById('main').appendChild(messageListElement);

      //Add hover effects

          messageListElement.addEventListener('mouseover', function() {
            this.style.opacity = 10;
          });
          messageListElement.addEventListener('mouseout', function() {
            this.style.opacity = 0.9;
          });

      		var senderElement = document.createElement('div');
      		senderElement.className = "sender";
      		senderElement.innerHTML = sender;
      		messageListElement.appendChild(senderElement);

      		var subjectElement = document.createElement('div');
      		subjectElement.className = "subject";
      		subjectElement.innerHTML = subject;
      		messageListElement.appendChild(subjectElement);

      		var dateElement = document.createElement('div');
      		dateElement.className = "date";
      		dateElement.innerHTML = date;
      		senderElement.appendChild(dateElement);

      		var bodyElement = document.createElement('div');
      		bodyElement.className = "body";
      		bodyElement.innerHTML = body;
      		messageListElement.appendChild(bodyElement);

//Show and hide the message body

		var messageListElement = document.getElementsByClassName('messageList');
			for (var j = 0; j < messageListElement.length; j++) {
				messageListElement[j].addEventListener('click', showMessage);
			}

		function showMessage() {
      var bodyShow = this.querySelectorAll('.body');
      for (i = 0; i < bodyShow.length; i++) {
			  bodyShow[i].classList.toggle('show');


      }
		} 
  }
}

    generateEmail(geemails);

      
//Create additional messages
    
    var newMessage = getNewMessage();
    
    function addNewMessages() {
      generateEmail([newMessage]);
      console.log(this);

    }

    setInterval(addNewMessages, 5000);



//Add up the messages

      function messageCount() {
        var messagesTotalElement = document.createElement('p');
        messagesTotalElement.innerHTML = geemails.length + " Messages";
        document.getElementById('headline').appendChild(messagesTotalElement);


      }
        
      messageCount();
   


      };
    </script>
	</head>
	<body id="body">
	   <header id="header">
      <h1>Geemail</h1>
	   </header>
    <div class="container col-xs-2" id="sidebar-wrapper">
      <ul class="list-group">
        <li class="list-group-item"><button type="button" class="btn btn-default btn-large">Compose</button></li>
        <li class="list-group-item">Inbox</li>
        <li class="list-group-item">Sent Mail</li>
        <li class="list-group-item">Spam</li>
        <li class="list-group-item">Trash</li>
      </ul>
     </div>
	   <div class="container col-xs-10" id="headline">
	   </div>
	   <div class="container col-xs-10" id="main">
	 </div>
	</body>
</html>