<html>
	<head>
    <title>Geemail</title>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">

    <script>
      window.onload = function(){
         
//Load the emails

      		function generateEmail(messages) {
      			for (var i = 0; i < messages.length; i++)  {
      				var sender = messages[i].sender;
      				var subject = messages[i].subject;
      				var date = messages[i].date;
      				var body = messages[i].body;
      			

      		var messageListElement = document.createElement('div');
      		messageListElement.className = 'messageList';
      		document.getElementById('main').appendChild(messageListElement);

      		var senderElement = document.createElement('div');
      		senderElement.className = "sender";
      		senderElement.innerHTML = sender;
      		messageListElement.appendChild(senderElement);

      		var subjectElement = document.createElement('div');
      		subjectElement.className = "subject";
      		subjectElement.innerHTML = subject;
      		messageListElement.appendChild(subjectElement);

      		var dateElement = document.createElement('div');
      		dateElement.className = "date";
      		dateElement.innerHTML = date;
      		messageListElement.appendChild(dateElement);

      		var bodyElement = document.createElement('div');
      		bodyElement.className = "body";
      		bodyElement.innerHTML = body;
      		messageListElement.appendChild(bodyElement);

//Show and hide the message body

		var messageListElement = document.getElementsByClassName('messageList');
			for (var j = 0; j < messageListElement.length; j++) {
				messageListElement[j].addEventListener('click', showMessage);
			}

		function showMessage() {
      var bodyShow = this.querySelectorAll('.body');
      for (i = 0; i < bodyShow.length; i++) {
			  bodyShow[i].classList.toggle('show');
      }
		} 
  }
}

      generateEmail(geemails);

      var newMessage = getNewMessage();
      console.log(newMessage);

       //window.geemails.push(getNewMessage)
//Create new periodic messages

      /*var interval = setInterval(getNewMessage, 1000);
      var newMessages;

      newMessages = [];
      function addNewMessages(message) {
        for (var i = 0; i < message.length; i++) {

        }
      } */

    function addNew() {
      var interval = setInterval(getNewMessage, 1000);
      }

    addNew(newMessage);


//Add up the messages

      function messageCount() {
        var messagesTotalElement = document.createElement('p');
        messagesTotalElement.innerHTML = geemails.length + " Messages";
        document.getElementById('headline').appendChild(messagesTotalElement);
      }
        
      messageCount();


      };
    </script>
	</head>
	<body>
	<header id="header">
		<h1>Geemail</h1>
	</header>
	<div class="container" id="headline">
	</div>
	<div class="container" id="main">
	</div>
	</body>
</html>