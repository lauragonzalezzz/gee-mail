<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">

    <script>
      window.onload = function(){
         
      		function generateEmail(messages) {
      			for (var i = 0; i < messages.length; i++)  {
      				var sender = messages[i].sender;
      				var subject = messages[i].subject;
      				var date = messages[i].date;
      				var body = messages[i].body;
      			

      		var messageListElement = document.createElement('div');
      		messageListElement.className = 'messageList';
      		document.getElementById('main').appendChild(messageListElement);

      		var senderElement = document.createElement('div');
      		senderElement.class = "sender";
      		senderElement.innerHTML = sender;
      		messageListElement.appendChild(senderElement);

      		var subjectElement = document.createElement('div');
      		subjectElement.class = "subject";
      		subjectElement.innerHTML = subject;
      		messageListElement.appendChild(subjectElement);

      		var buttonElement = document.createElement('button');
      		buttonElement.class = "buttonElement";
      		buttonElement.innerHTML = "Full Message";
      		subjectElement.appendChild(buttonElement);

      		var dateElement = document.createElement('div');
      		dateElement.class = "date";
      		dateElement.innerHTML = date;
      		messageListElement.appendChild(dateElement);

      		var bodyElement = document.createElement('div');
      		bodyElement.class = "body";
      		bodyElement.innerHTML = body;
      		messageListElement.appendChild(bodyElement);

      	//Show and hide the message body

			/*var messageListElement = document.getElementsByClassName('messageList');
			for (var j = 0; j < messageListElement.length; j++) {
				messageListElement[j].addEventListener('click', showMessage);
			}

			function showMessage() {
				var bodyShow = document.querySelectorAll('.body');
				bodyShow.classList.toggle('show');

			}*/

			var buttonFn = document.getElementsByClassName('buttonElement');
			for (var k = 0; k < buttonFn.length; k++) {
				buttonFn[k].addEventListener('click', showMessage);
			}

			function showMessage() {
				document.getElementsByClassName('body').classList.toggle('show');

			}

          }
        } 

        generateEmail(geemails);
        
        
        function messageCount() {

        var messagesTotalElement = document.createElement('p');
        messagesTotalElement.innerHTML = geemails.length + " Messages";
        document.getElementById('headline').appendChild(messagesTotalElement);
    	}
        
        messageCount(); 


        var newMessage = setInterval(getNewMessage, 3000);

        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        


      };
    </script>
	</head>
	<body>
	<header>
		<h1>Geemail</h1>
	</header>
	<div class="container" id="headline">
	</div>
	<div class="container" id="main">
	</div>
	</body>
</html>